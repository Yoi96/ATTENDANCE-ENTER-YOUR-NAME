<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Save Student Information</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.js"></script>
</head>
<body>
    <h1>Student Information Form</h1>
    <form id="student-form">
        <label for="first_name">First Name:</label>
        <input type="text" id="first_name" required><br>

        <label for="middle_name">Middle Name:</label>
        <input type="text" id="middle_name"><br>

        <label for="last_name">Last Name:</label>
        <input type="text" id="last_name" required><br>

        <label for="schools">Schools:</label>
        <input type="text" id="schools" required><br>

        <label for="osis_number">OSIS Number:</label>
        <input type="text" id="osis_number" required><br>

        <button type="submit">Submit</button>
    </form>

    <script>
        const supabaseUrl = 'https://fejedqaukushmsneqneb.supabase.co';
const supabaseKey = String.fromEnvironment('SUPABASE_KEY');
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);

        document.getElementById('student-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            const firstName = document.getElementById('first_name').value;
            const middleName = document.getElementById('middle_name').value;
            const lastName = document.getElementById('last_name').value;
            const schools = document.getElementById('schools').value;
            const osisNumber = document.getElementById('osis_number').value;

            const { data, error } = await supabase
                .from('students') // Replace 'students' with your actual table name
                .insert([
                    { 
                        first_name: firstName, 
                        middle_name: middleName, 
                        last_name: lastName, 
                        schools: schools, 
                        osis_number: osisNumber 
                    }
                ]);

            if (error) {
                console.error('Error inserting data:', error);
            } else {
                console.log('Data inserted successfully:', data);
                alert('Student information saved!');
                document.getElementById('student-form').reset(); // Reset the form
            }
        });
    </script>
</body>
</html>
